name: Redeploy Content Repo Previews

# When the dev-portal/main branch is pushed to, redeploy the `main` branches of
# the listed docs content repositories. The redeploys are triggered through a
# Deploy Hook created for each repository's Vercel project. These can be found
# in the Git settings within the Vercel project.

on:
  push:
    branches:
      - main

jobs:
  redeploy-content-repo-previews:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger "cloud-docs-developer-preview" deploy
        run: curl -X POST ${{ secrets.VERCEL_DEPLOY_HOOK_CLOUD_DOCS_DEVELOPER_PREVIEW }}
      - name: Trigger "vagrant" deploy
        run: curl -X POST ${{ secrets.VERCEL_DEPLOY_HOOK_VAGRANT }}
      - name: Trigger "waypoint" deploy
        run: curl -X POST ${{ secrets.VERCEL_DEPLOY_HOOK_WAYPOINT }}
