name: Redeploy Content Repo Previews

on:
  # TODO remove before merging
  pull_request:
    types: [labeled]
  # TODO uncomment before merging
  # push:
  #   branches:
  #     - main

jobs:
  redeploy-content-repo-previews:
    # TODO remove this `if` before merging
    if: ${{ github.event.label.name == 'workflow-test-label' }}
    runs-on: ubuntu-latest
    steps:
      - name: Check if "RANDOM_SECRET_NAME_FOR_TESTING" secret exists
        if: ${{ secrets.RANDOM_SECRET_NAME_FOR_TESTING == '' }}
        run: echo "The `RANDOM_SECRET_NAME_FOR_TESTING` secret does not exist."
      - name: Echo something else if the secret exists
        if: ${{ secrets.RANDOM_SECRET_NAME_FOR_TESTING != '' }}
        run: echo "Cool, the secret exists"

      # TODO uncomment before merging (it works! :D)
      # - name: Trigger "cloud-docs-developer-preview" deploy
      #   run: curl -X POST ${{ secrets.VERCEL_DEPLOY_HOOK_CLOUD_DOCS_DEVELOPER_PREVIEW }}
