//
// ACCORDION
//

@use "../../styles/mixins/button" as *;
@use "../../styles/mixins/focus-ring" as *;

$item-padding: 16px;
$item-border-radius: 6px;

// ACCORDION COMPONENT (wrapper)

.accordion {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

// ACCORDION ITEM COMPONENT (nested child)

.item {
  background: var(--token-color-surface-primary);
  border-radius: $item-border-radius;

  &.does-not-contain-interactive {
    box-shadow: var(--token-surface-mid-box-shadow);

    &:hover,
    &:global(.mock-hover) {
      box-shadow: var(--token-surface-high-box-shadow);
    }
  }

  &.contains-interactive {
    box-shadow: var(--token-surface-base-box-shadow);
  }
}

// TOGGLE BLOCK

.toggle {
  position: relative;
  display: flex;
  gap: 12px;
  align-items: center;
  padding:
    $item-padding
    $item-padding
    $item-padding
    12px; // by design
}

.button {
  padding: 0;

  &:hover { cursor: pointer; }

  & .icon {
    @media (prefers-reduced-motion: no-preference) {
      transition: transform 0.3s;
    }

    &.icon-rotate {
      transform: rotate(-180deg);
    }
  }

  // entire toggle area is interactive
  &.parent-does-not-contain-interactive {
    @include hds-focus-ring-with-pseudo-element();
    position: static;
    margin: -1px 0;
    color: var(--token-color-foreground-primary);
    background: transparent;
    border: 1px solid transparent;

    // expand button target to cover entire AccordionItem Toggle block (depending on the `@containsInteractive/@parentContainsInteractive` argument)
    &::after {
      position: absolute;
      display: block;
      border-radius: $item-border-radius;
      content: "";
      inset: 0;
    }
  }

  // only chevron button area is interactive
  &.parent-contains-interactive {
    @include hds-button();
    width: 24px;
    height: 24px;

    &:focus,
    &:global(.mock-focus) {
      @include hds-button-state-focus();
    }

    // `hds-button-color-secondary` determines the focus color and needs to be placed after `hds-button-state-focus`
    @include hds-button-color-secondary();
  }
}

// Consumer added content that appears next to the chevron button:
.toggle-content {
  flex: 1;
}

// CONTENT BLOCK

.content {
  padding: 4px $item-padding $item-padding $item-padding;
}